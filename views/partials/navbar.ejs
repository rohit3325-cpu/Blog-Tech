<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm sticky-top">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand fw-bold fs-4" href="#">Blog-Tech</a>

    <!-- Toggle Button for Mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" 
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Links -->
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ms-auto">
        <!-- Home -->
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/">Home</a>
        </li>

        <!-- If logged in -->
        <% if (locals.user) { %>
          <li class="nav-item">
            <a class="nav-link" href="/blog/add-new">Add Blog</a>
          </li> 
          <!-- Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
           <img 
  src="/images/image_avatar.png" 
  alt="Avatar" 
  style="width:35px; height:35px; border-radius:50%; object-fit:cover; margin-left:8px; border:2px solid white;"
/>

            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow">
              <li><a class="dropdown-item text-danger fw-semibold" href="/user/logout">Logout</a></li>
            </ul>
          </li>
        <% } else { %>
          <!-- If not logged in -->
          <li class="nav-item">
            <a class="nav-link" href="/user/signin">Sign In</a>
          </li> 
          <li class="nav-item">
            <a class="nav-link btn btn-primary text-white px-3 ms-2 rounded-3" href="/user/signup">Create Account</a>
          </li> 
        <% } %>

        <!-- Dark Mode Toggle -->
        <li class="nav-item d-flex align-items-center ms-3">
          <button id="darkModeToggle" class="btn btn-sm btn-outline-light rounded-circle">üåô</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Error Alert -->
<% if(locals.error) { %>
  <div class="container mt-4">
    <div class="alert alert-danger shadow-sm rounded-3" role="alert">
      <%= locals.error %>
    </div>
  </div>
<% } %>

<!-- Dark Mode Script -->
<script>
  const toggleBtn = document.getElementById('darkModeToggle');
  const body = document.body;

  // Load saved preference
  if (localStorage.getItem('theme') === 'dark') {
    body.classList.add('dark-mode');
    toggleBtn.textContent = '‚òÄÔ∏è';
  }

  toggleBtn.addEventListener('click', () => {
    body.classList.toggle('dark-mode');

    if (body.classList.contains('dark-mode')) {
      toggleBtn.textContent = '‚òÄÔ∏è';
      localStorage.setItem('theme', 'dark');
    } else {
      toggleBtn.textContent = 'üåô';
      localStorage.setItem('theme', 'light');
    }
  });
</script>

