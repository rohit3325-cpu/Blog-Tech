<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm sticky-top py-2">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand fw-bold fs-3" href="#">Blog-Tech</a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Desktop Menu -->
    <div class="collapse navbar-collapse d-none d-lg-flex justify-content-end align-items-center">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item mx-2">
          <a class="nav-link text-white fw-semibold" href="/">Home</a>
        </li>

        <% if (locals.user) { %>
          <li class="nav-item mx-2">
            <a class="nav-link text-white fw-semibold" href="/blog/add-new">Add Blog</a>
          </li>
          <li class="nav-item dropdown mx-2">
            <a class="nav-link dropdown-toggle p-0" href="#" data-bs-toggle="dropdown">
              <img src="/images/image_avatar.png" alt="Avatar" class="rounded-circle" style="width:40px; height:40px; border:2px solid #fff; object-fit:cover;">
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow rounded-3">
              <li><a class="dropdown-item text-danger fw-semibold" href="/user/logout">Logout</a></li>
            </ul>
          </li>
        <% } else { %>
          <li class="nav-item mx-2">
            <a class="nav-link text-white fw-semibold" href="/user/signin">Sign In</a>
          </li>
          <li class="nav-item mx-2">
            <a class="btn btn-primary btn-sm px-4 rounded-pill fw-semibold" href="/user/signup">Create Account</a>
          </li>
        <% } %>

        <!-- Dark Mode Toggle -->
        <li class="nav-item ms-3">
          <button id="darkModeToggle" class="btn btn-outline-light rounded-circle shadow-sm">🌙</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Offcanvas Drawer (Mobile) -->
<div class="offcanvas offcanvas-end bg-dark text-white d-lg-none" tabindex="-1" id="mobileMenu">
  <div class="offcanvas-header border-bottom border-secondary">
    <h5 class="offcanvas-title fw-bold">Menu</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="navbar-nav">
      <li class="nav-item mb-2">
        <a class="nav-link text-white fw-semibold" href="/">Home</a>
      </li>

      <% if (locals.user) { %>
        <li class="nav-item mb-2">
          <a class="nav-link text-white fw-semibold" href="/blog/add-new">Add Blog</a>
        </li>
        <li class="nav-item mb-2">
          <a class="nav-link text-danger fw-semibold" href="/user/logout">Logout</a>
        </li>
      <% } else { %>
        <li class="nav-item mb-2">
          <a class="nav-link text-white fw-semibold" href="/user/signin">Sign In</a>
        </li>
        <li class="nav-item mb-2">
          <a class="btn btn-primary w-100 rounded-pill fw-semibold" href="/user/signup">Create Account</a>
        </li>
      <% } %>

      <li class="nav-item mt-3">
        <button id="darkModeToggleMobile" class="btn btn-outline-light w-100 rounded-pill fw-semibold">🌙 Dark Mode</button>
      </li>
    </ul>
  </div>
</div>

<script>
  const body = document.body;
  const toggleBtn = document.getElementById("darkModeToggle");
  const toggleBtnMobile = document.getElementById("darkModeToggleMobile");

  function setTheme(theme) {
    if (theme === "dark") {
      body.classList.add("dark-mode");
      body.classList.remove("light-mode");
      toggleBtn.textContent = "☀️";
      toggleBtnMobile.textContent = "☀️ Light Mode";
      localStorage.setItem("theme", "dark");
    } else {
      body.classList.add("light-mode");
      body.classList.remove("dark-mode");
      toggleBtn.textContent = "🌙";
      toggleBtnMobile.textContent = "🌙 Dark Mode";
      localStorage.setItem("theme", "light");
    }
  }

  setTheme(localStorage.getItem("theme") || "light");

  toggleBtn.addEventListener("click", () => {
    setTheme(body.classList.contains("dark-mode") ? "light" : "dark");
  });

  toggleBtnMobile.addEventListener("click", () => {
    setTheme(body.classList.contains("dark-mode") ? "light" : "dark");
  });
</script>

<style>
  body.light-mode { background-color: #f8f9fa; color: #212529; transition: 0.3s; }
  body.dark-mode { background-color: #121212; color: #f1f1f1; transition: 0.3s; }

  .nav-link { transition: 0.3s; }
  .nav-link:hover { color: #f4d03f !important; }

  .btn-primary { transition: 0.3s; }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }

  .offcanvas { transition: transform 0.4s ease; }
</style>


